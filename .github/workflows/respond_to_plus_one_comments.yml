name: Respond to +1 comments
on:
  issue_comment:
    types: [created]
jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/github-script@v3
      with:
        github-token: ${{secrets.GITHUB_TOKEN}}
        script: |
          const comment_body = context.payload.comment.body;
          const comment_id = context.payload.comment.id;
          const issue = context.issue;
          const octokit = github;
          if(comment_body.includes("+1")) {
            const github_user = context.payload.comment.user.login;
            const issue_number = context.issue.number;
            const message = `@${github_user} It is better to use a ğŸ‘ reaction on the original post instead of "+1" comment. We run a script that counts the number of ğŸ‘ reactions each issue gets so that we can properly gauage interest in a feature.`;
            await octokit.issues.deleteComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              comment_id: comment_id,
            });
            await octokit.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue_number,
              body: message,
            });
          }
